(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-post-send-post-send"],{"269e":function(e,t,i){var n=i("feff");"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var o=i("4f06").default;o("cf01407a",n,!0,{sourceMap:!1,shadowMode:!1})},"3f7b":function(e,t,i){"use strict";var n=i("df71"),o=i.n(n);o.a},4229:function(e,t,i){"use strict";var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{ref:"edit",staticClass:"edit-view",attrs:{contenteditable:e.canEdit,placeholder:e.innerText?"":"写几句准备发表帖子啦..."},domProps:{innerHTML:e._s(e.innerText)},on:{focus:function(t){t=e.$handleEvent(t),e.isLocked=!0},blur:function(t){t=e.$handleEvent(t),e.isLocked=!1},input:function(t){t=e.$handleEvent(t),e.changeText(t)}}})},o=[];i.d(t,"a",function(){return n}),i.d(t,"b",function(){return o})},6790:function(e,t,i){t=e.exports=i("2350")(!1),t.push([e.i,'@charset "UTF-8";\n/**\r\n * 这里是uni-app内置的常用样式变量\r\n *\r\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\r\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n *\r\n */\n/**\r\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n *\r\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\r\n */\n/* 颜色变量 */\n/* 行为相关颜色 */\n/* 文字基本颜色 */\n/* 背景颜色 */\n/* 边框颜色 */\n/* 尺寸变量 */\n/* 文字尺寸 */\n/* 图片尺寸 */\n/* Border Radius */\n/* 水平间距 */\n/* 垂直间距 */\n/* 透明度 */\n/* 文章场景相关 */.edit-view[data-v-0724c16c]{width:100%;height:100%;overflow:auto;word-break:break-all;outline:none;-webkit-user-select:text;-moz-user-select:text;-ms-user-select:text;user-select:text;white-space:pre-wrap;text-align:left}.edit-view[contenteditable=true][data-v-0724c16c]{user-modify:read-write-plaintext-only}.edit-view[contenteditable=true][data-v-0724c16c]:empty:before{content:attr(placeholder);display:block;color:#ccc}',""])},7524:function(e,t,i){"use strict";i.r(t);var n=i("79e3"),o=i("91a9");for(var a in o)"default"!==a&&function(e){i.d(t,e,function(){return o[e]})}(a);i("bfda");var s=i("2877"),c=Object(s["a"])(o["default"],n["a"],n["b"],!1,null,"5d95e7ba",null);t["default"]=c.exports},7728:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=o(i("e29a"));function o(e){return e&&e.__esModule?e:{default:e}}function a(e){return r(e)||c(e)||s()}function s(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function c(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function r(e){if(Array.isArray(e)){for(var t=0,i=new Array(e.length);t<e.length;t++)i[t]=e[t];return i}}var l={components:{editDiv:n.default},data:function(){return{currentTool:"emoticon",comment:"",files:[],video:"",success:0,fail:0,emojisList:[["00","01","02","03","04","05","06","07","08","09","10","11","12","13","14","15","16","17","18","19"],["20","21","22","23","24","25","26","27","28","29","30","31","32","33","34","35","36","37","38","39"],["40","41","42","43","44","45","46","47","48","49","50","51","52","53","54","55","56","57","58","59"],["60","61","52","63","64","65","66","67","68","69","70","71","72","73","74","75","76","77","78","79"],["80","81","82","83","84","85","86","87","88","89","90","91","92","93","94","95","96","97","98","99"],["100","101","102","103","104","105","106","107","108","109","110","111","112","113","114","115","116","117","118","119"],["120","121","122","123","124","125","126","127","128","129","130","131","132","133","134"]],currentSwiper:0}},onLoad:function(e){document.title="发帖子"},onShow:function(){},mounted:function(){},methods:{changeTool:function(e){this.files.length&&"video"==e||this.video&&"picture"==e?uni.showToast({title:"图片和视频不能同时上传",icon:"none"}):this.currentTool=e},chooseImage:function(e){var t=this;this.files.length>=9?uni.showToast({title:"最多上传9张",icon:"none"}):uni.chooseImage({count:9,sizeType:["original","compressed"],sourceType:["album","camera"],success:function(e){var i=e.tempFilePaths;if(t.files.length+e.tempFilePaths.length>9)uni.showToast({title:"您已上传"+t.files.length+"张,还可上传"+(9-t.files.length)+"张",icon:"none"});else for(var n in i)t.uploadimg(i,n).then(function(e){0===t.fail?uni.showToast({title:"上传成功",icon:"none"}):t.fail<i.length?uni.showToast({title:"上传成功"+t.success+"张,失败"+t.fail+"张",icon:"none"}):uni.showToast({title:"上传失败",icon:"none"}),t.success=0,t.fail=0})},fail:function(e){}})},uploadimg:function(e,t,i){var n=this;return new Promise(function(i,o){var s=n;uni.uploadFile({url:s.$globalData.baseUrl+"MocarUser/upload",filePath:e[t],name:"file",success:function(e){var t=s.$globalData.imgUrl+JSON.parse(e.data).data,i=s.files;s.files=[].concat(a(i),[t]),s.success=s.success+1},fail:function(e){s.fail=s.fail+1},complete:function(){t==e.length-1&&i(!0)}})})},previewImage:function(e){uni.previewImage({current:e,urls:this.files})},deleteImg:function(e){var t=e,i=this.files;for(var n in i)n==t&&i.splice(n,1);this.files=i},swiperChange:function(e){this.currentSwiper=e.detail.current},pickEmojis:function(e,t){this.comment+='<img src="/static/emojis/'.concat(this.emojisList[e][t],'.gif" mode=""></image>')},uploadVideo:function(){var e=this;uni.chooseVideo({sourceType:["album","camera"],maxDuration:60,camera:"back",success:function(t){console.log("成功了",t.tempFilePath),uni.uploadFile({url:e.$globalData.baseUrl+"MocarUser/upload",filePath:t.tempFilePath,name:"file",success:function(t){e.video="http://wxsnsdy.tc.qq.com/105/20210/snsdyvideodownload?filekey=30280201010421301f0201690402534804102ca905ce620b1241b726bc41dcff44e00204012882540400&bizid=1023&hy=SH&fileparam=302c020101042530230204136ffd93020457e3c4ff02024ef202031e8d7f02030f42400204045a320a0201000400",uni.showToast({title:"上传成功",icon:"none"})},fail:function(e){uni.showToast({title:"上传失败",icon:"none"})}})},fail:function(e){console.log("失败了")}})},deleteVideo:function(){this.video=""},send:function(){(this.comment||this.files.length||video)&&console.log("发送了")}},onReachBottom:function(){},onPullDownRefresh:function(){}};t.default=l},"79e3":function(e,t,i){"use strict";var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-uni-view",{staticClass:"container"},[i("v-uni-view",{staticClass:"content"},[i("editDiv",{model:{value:e.comment,callback:function(t){e.comment=t},expression:"comment"}})],1),i("v-uni-view",{staticClass:"tools flex"},[i("v-uni-view",{staticClass:"tools-list flex"},[i("v-uni-image",{staticClass:"picture_img",attrs:{src:"/static/images/"+("picture"==e.currentTool?"picture_light":"picture_normal")+".png",mode:""},on:{click:function(t){t=e.$handleEvent(t),e.changeTool("picture")}}}),i("v-uni-image",{staticClass:"emoticon_img",attrs:{src:"/static/images/"+("emoticon"==e.currentTool?"emoticon_light":"emoticon_normal")+".png",mode:""},on:{click:function(t){t=e.$handleEvent(t),e.changeTool("emoticon")}}}),i("v-uni-image",{staticClass:"video_img",attrs:{src:"/static/images/"+("video"==e.currentTool?"video_light":"video_normal")+".png",mode:""},on:{click:function(t){t=e.$handleEvent(t),e.changeTool("video")}}})],1),i("v-uni-view",{class:"send-btn "+(e.comment||e.files.length||e.video?"send-btn_active":""),on:{click:function(t){t=e.$handleEvent(t),e.send(t)}}},[e._v("发送")])],1),"picture"==e.currentTool?i("v-uni-view",{staticClass:"imgs"},[e._l(e.files,function(t,n){return i("v-uni-view",{key:n,staticClass:"img pos-rel"},[i("v-uni-image",{attrs:{mode:"scaleToFill",src:t},on:{click:function(i){i=e.$handleEvent(i),e.previewImage(t)}}}),i("v-uni-view",{staticClass:"delete flex pos-abs",on:{click:function(t){t=e.$handleEvent(t),e.deleteImg(n)}}},[i("v-uni-image",{attrs:{src:"/static/images/delete.png"}})],1)],1)}),i("v-uni-view",{staticClass:"img pos-rel"},[i("v-uni-image",{attrs:{src:"/static/images/upload.png"},on:{click:function(t){t=e.$handleEvent(t),e.chooseImage(t)}}})],1)],2):e._e(),"video"==e.currentTool?i("v-uni-view",{staticClass:"videos pos-rel"},[e.video?e._e():i("v-uni-view",{staticClass:"upload",on:{click:function(t){t=e.$handleEvent(t),e.uploadVideo(t)}}},[e._v("上传")]),e.video?i("v-uni-video",{attrs:{id:"myVideo",src:e.video}}):e._e(),e.video?i("v-uni-view",{staticClass:"delete flex pos-abs",on:{click:function(t){t=e.$handleEvent(t),e.deleteVideo(t)}}},[i("v-uni-image",{attrs:{src:"/static/images/delete.png"}})],1):e._e()],1):e._e(),"emoticon"==e.currentTool?i("v-uni-view",{staticClass:"emoticon"},[i("v-uni-swiper",{on:{change:function(t){t=e.$handleEvent(t),e.swiperChange(t)}}},e._l(e.emojisList,function(t,n){return i("v-uni-swiper-item",{key:n,staticClass:"flex"},e._l(t,function(t,o){return i("v-uni-image",{key:o,attrs:{src:"/static/emojis/"+t+".gif",mode:""},on:{click:function(t){t=e.$handleEvent(t),e.pickEmojis(n,o)}}})}),1)}),1),i("v-uni-view",{staticClass:"indicator flex"},[e._l(e.emojisList.length,function(t,n){return[i("v-uni-view",{key:n+"_0",staticClass:"indicator-item",class:e.currentSwiper==n?"indicator-item-active":""})]})],2)],1):e._e()],1)},o=[];i.d(t,"a",function(){return n}),i.d(t,"b",function(){return o})},"91a9":function(e,t,i){"use strict";i.r(t);var n=i("7728"),o=i.n(n);for(var a in n)"default"!==a&&function(e){i.d(t,e,function(){return n[e]})}(a);t["default"]=o.a},9582:function(e,t,i){"use strict";i.r(t);var n=i("b09c"),o=i.n(n);for(var a in n)"default"!==a&&function(e){i.d(t,e,function(){return n[e]})}(a);t["default"]=o.a},b09c:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n={name:"editView",props:{value:{type:String,default:""},canEdit:{type:Boolean,default:!0}},data:function(){return{innerText:this.value,isLocked:!1}},watch:{value:{handler:function(){var e=this;this.isLocked&&this.innerText||(this.innerText=this.value,setTimeout(function(t){e.keepLastIndex()},5))},deep:!0}},methods:{changeText:function(){var e=this;this.$emit("input",this.$el.innerHTML),setTimeout(function(t){e.keepLastIndex()},5)},keepLastIndex:function(){var e=this.$refs.edit;if(window.getSelection){e.focus();var t=window.getSelection();t.selectAllChildren(e),t.collapseToEnd()}else if(document.selection){t=document.selection.createRange();t.moveToElementText(e),t.collapse(!1),t.select()}}}};t.default=n},bfda:function(e,t,i){"use strict";var n=i("269e"),o=i.n(n);o.a},df71:function(e,t,i){var n=i("6790");"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var o=i("4f06").default;o("33e44e4b",n,!0,{sourceMap:!1,shadowMode:!1})},e29a:function(e,t,i){"use strict";i.r(t);var n=i("4229"),o=i("9582");for(var a in o)"default"!==a&&function(e){i.d(t,e,function(){return o[e]})}(a);i("3f7b");var s=i("2877"),c=Object(s["a"])(o["default"],n["a"],n["b"],!1,null,"0724c16c",null);t["default"]=c.exports},feff:function(e,t,i){t=e.exports=i("2350")(!1),t.push([e.i,'@charset "UTF-8";\n/**\r\n * 这里是uni-app内置的常用样式变量\r\n *\r\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\r\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n *\r\n */\n/**\r\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n *\r\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\r\n */\n/* 颜色变量 */\n/* 行为相关颜色 */\n/* 文字基本颜色 */\n/* 背景颜色 */\n/* 边框颜色 */\n/* 尺寸变量 */\n/* 文字尺寸 */\n/* 图片尺寸 */\n/* Border Radius */\n/* 水平间距 */\n/* 垂直间距 */\n/* 透明度 */\n/* 文章场景相关 */.content[data-v-5d95e7ba]{width:100%;height:%?405?%;padding:%?10?% %?10?%\n  /* \tbox-sizing: border-box;\n\tborder: black 1upx solid; \n\toverflow:auto;\n\t&:before{\n\t\tcontent: attr(placeholder);\n\t\tdisplay: block;\n\t\tcolor: #adadad;\n\t} */}.comment uni-textarea[data-v-5d95e7ba]{width:100%;height:%?405?%;background:#fff;padding-top:%?12?%;padding-left:%?25?%;-webkit-box-sizing:border-box;box-sizing:border-box}.tools[data-v-5d95e7ba]{padding:0 %?25?%;height:%?88?%;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;border:%?1?% solid #e5e5e5}.tools .tools-list[data-v-5d95e7ba]{-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center}.tools .tools-list .picture_img[data-v-5d95e7ba]{width:%?50?%;height:%?44?%;margin-right:%?20?%}.tools .tools-list .emoticon_img[data-v-5d95e7ba]{width:%?52?%;height:%?51?%;margin-right:%?20?%}.tools .tools-list .video_img[data-v-5d95e7ba]{width:%?53?%;height:%?43?%}.tools .send-btn[data-v-5d95e7ba]{width:%?120?%;height:%?76?%;border-radius:%?8?%;font-size:%?24?%;text-align:center;line-height:%?76?%;color:#ccc;background:#e8ebf0}.tools .send-btn_active[data-v-5d95e7ba]{color:#fff;background:#fcba32}.imgs[data-v-5d95e7ba]{padding:%?30?% %?30?% 0}.imgs .img[data-v-5d95e7ba]{width:%?112?%;height:%?112?%;margin-right:%?20?%;display:inline-block}.imgs .img>uni-image[data-v-5d95e7ba]{width:100%;height:100%;border:%?1?% solid #e5e5e5}.imgs .img>uni-image[data-v-5d95e7ba]:last-child{background:#fff;border:0}.imgs .img .delete[data-v-5d95e7ba]{width:%?50?%;height:%?50?%;top:%?-20?%;right:%?-20?%}.imgs .img .delete uni-image[data-v-5d95e7ba]{width:100%;height:100%;margin:auto}.videos[data-v-5d95e7ba]{padding:%?30?% %?30?% 0}.videos .upload[data-v-5d95e7ba]{width:%?176?%;height:%?66?%;text-align:center;line-height:%?66?%;color:#fff;background:#fcba32}.videos uni-video[data-v-5d95e7ba]{width:100%;margin-top:%?20?%}.videos .delete[data-v-5d95e7ba]{width:%?80?%;height:%?80?%;top:%?10?%;right:%?-10?%}.videos .delete uni-image[data-v-5d95e7ba]{width:%?50?%;height:%?50?%;margin:auto}.emoticon uni-swiper[data-v-5d95e7ba]{width:100%;height:%?240?%}.emoticon uni-swiper uni-swiper-item[data-v-5d95e7ba]{padding:%?30?% %?50?% 0;-webkit-box-sizing:border-box;box-sizing:border-box;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap}.emoticon uni-swiper uni-swiper-item uni-image[data-v-5d95e7ba]{width:%?60?%;height:%?60?%;margin:0 %?16?%}.emoticon uni-swiper uni-swiper-item uni-image[data-v-5d95e7ba]:nth-child(7n+7){margin-right:0}.emoticon .indicator[data-v-5d95e7ba]{width:100%;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center}.emoticon .indicator .indicator-item[data-v-5d95e7ba]{width:%?22?%;height:%?22?%;margin-right:%?15?%;border-radius:50%;background:#b2b2b2}.emoticon .indicator .indicator-item-active[data-v-5d95e7ba]{background:#666}',""])}}]);